{"version":3,"sources":["webpack:///./src/views/Goods/index.vue?b42a","webpack:///./src/helpers/good-classify/index.js","webpack:///./src/views/Goods/index.vue","webpack:///./src/views/Goods/AddOne/index.vue","webpack:///./src/views/Goods/AddOne/index.js","webpack:///./src/views/Goods/AddOne/index.vue?ef21","webpack:///./src/views/Goods/index.jsx","webpack:///./src/views/Goods/index.vue?5eaf","webpack:///./src/views/Goods/Update/index.vue","webpack:///./src/views/Goods/Update/index.js","webpack:///./src/views/Goods/Update/index.vue?d075"],"names":["getClassifyTitleById","id","one","store","state","goodClassify","find","item","_id","title","class","simple","$$","PAGE_META","DASHBOARD","RECENT","LEFT_TITLE","TOPIC_MGR","PAGE_TITLE","placeholder","KEYWORD","enter-button","value","keyword","onSearch","isSearch","href","backAll","show","onUploadChange","action","headers","type","columns","data-source","list","pagination","bordered","scroll","producedDate","formatTimestamp","data","record","classify","count","updateCount","toDetail","update","remove","style","current","curPage","total","page-size","setPage","classifyList","goodClassifyList","getList","showUpdateModal","good","curEditGood","updateCurGood","visible","props","submit","close","label-col","label","addForm","name","price","min","max","expirationDate","key","defaultFormData","defineComponent","Boolean","setup","context","reactive","clone","length","emit","form","valueOf","add","res","result","success","d","Object","assign","message","msg","render","components","AddOne","Update","router","useRouter","_","dataIndex","slots","customRender","push","ref","page","size","l","t","onMounted","text","word","Modal","confirm","content","onOk","el","document","querySelector","num","Math","abs","console","log","curEditgood","newData","file","response","addMany","addCount","getHeaders","__scopeId","editForm","watch","moment","Number"],"mappings":"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","file":"js/Goods.716a968b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=464bc92e&lang=scss&scoped=true\"","import store from '@/store';\n\nexport const getClassifyTitleById = (id) => {\n  const one = store.state.goodClassify.find((item) => (item._id === id));\n\n  return one && one.title || '未知分类';\n};\n","<template>\n  <div>\n    <a-card\n      :title=\"simple ? $$.PAGE_META.DASHBOARD.RECENT.LEFT_TITLE : ''\"\n    >\n      <div v-if=\"!simple\">\n        <h2>{{ $$.PAGE_META.TOPIC_MGR.PAGE_TITLE }}</h2>\n\n        <a-divider />\n\n        <space-between>\n          <div class=\"search\">\n            <a-input-search\n              :placeholder=\"`根据${$$.KEYWORD}搜索`\"\n              enter-button\n              v-model:value=\"keyword\"\n              @search=\"onSearch\"\n            />\n\n            <a v-if=\"isSearch\" href=\"javascript:;\" @click=\"backAll\">返回</a>\n          </div>\n\n          <div>\n            <a-button\n              @click=\"show = true\"\n              v-only-admin\n            >\n              添加一条\n            </a-button>\n            &nbsp;\n            <a-upload\n              @change=\"onUploadChange\"\n              action=\"http://localhost:3000/upload/file\"\n              :headers=\"headers\"\n            >\n            <!-- :headers=\"headers\" -->\n              <a-button type=\"primary\">上传 Excel 添加</a-button>\n            </a-upload>\n          </div>\n        </space-between>\n\n        <a-divider />\n      </div>\n\n      <a-table\n        :columns=\"columns\"\n        :data-source=\"list\"\n        :pagination=\"false\"\n        bordered\n        :scroll=\"{ x: 'max-content' }\"\n      >\n        <template #producedDate=\"data\">\n          {{ formatTimestamp(data.record.producedDate) }}\n        </template>\n\n        <template #classify=\"{ record }\">\n          {{ getClassifyTitleById(record.classify) }}\n        </template>\n\n        <template #count=\"data\">\n          <a href=\"javascript:;\" @click=\"updateCount('IN_COUNT', data.record)\">入库</a>\n          {{ data.record.count }}\n          <a href=\"javascript:;\" @click=\"updateCount('OUT_COUNT', data.record)\">出库</a>\n        </template>\n\n        <template #actions=\"record\" v-if=\"!simple\">\n          <a href=\"javascript:;\" @click=\"toDetail(record)\">详情</a>\n          &nbsp;\n          <a v-only-admin href=\"javascript:;\" @click=\"update(record)\">编辑</a>\n          &nbsp;\n          <a v-only-admin href=\"javascript:;\" @click=\"remove(record)\">删除</a>\n        </template>\n      </a-table>\n      <flex-end v-if=\"!simple\" style=\"margin-top: 24px;\">\n        <a-pagination\n          v-model:current=\"curPage\"\n          :total=\"total\"\n          :page-size=\"10\"\n          @change=\"setPage\"\n        />\n      </flex-end>\n    </a-card>\n\n    <add-one\n      v-model:show=\"show\"\n      :classifyList=\"goodClassifyList\"\n      @getList=\"getList\"\n    />\n\n    <update\n      v-model:show=\"showUpdateModal\"\n      :good=\"curEditGood\"\n      @update=\"updateCurGood\"\n    />\n  </div>\n</template>\n\n<script src=\"./index.jsx\"></script>\n\n<style lang=\"scss\" scoped>\n  @import './index.scss';\n</style>\n","<template>\n  <div>\n    <a-modal\n      :title=\"`添加${$$.KEYWORD}`\"\n      :visible=\"props.show\"\n      @ok=\"submit\"\n      @cancel=\"close\"\n    >\n      <a-form :label-col=\"{ span: 6 }\">\n        <a-form-item :label=\"`${$$.KEYWORD}名`\">\n          <a-input v-model:value=\"addForm.name\" />\n        </a-form-item>\n        <a-form-item label=\"价格\">\n          <a-input-number v-model:value=\"addForm.price\" :min=\"0\" :max=\"99999999999\" />\n        </a-form-item>\n        <a-form-item label=\"保质期\">\n          <a-input v-model:value=\"addForm.expirationDate\" />\n        </a-form-item>\n        <a-form-item label=\"生产日期\">\n          <a-date-picker v-model:value=\"addForm.producedDate\" />\n        </a-form-item>\n        <a-form-item label=\"分类\">\n          <a-select\n            v-model:value=\"addForm.classify\"\n            style=\"width: 120px\"\n          >\n            <a-select-option\n              v-for=\"item in store.goodClassify\"\n              :key=\"item._id\"\n              :value=\"item._id\"\n            >\n              {{ item.title }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item label=\"库存\">\n          <a-input v-model:value=\"addForm.count\" />\n        </a-form-item>\n      </a-form>\n    </a-modal>\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>\n","import { defineComponent, reactive } from 'vue';\nimport { good } from '@/service';\nimport { message } from 'ant-design-vue';\nimport store from '@/store';\nimport { result, clone } from '@/helpers/utils';\n\nconst defaultFormData = {\n  name: '',\n  price: 0,\n  producedDate: 0,\n  expirationDate: 0,\n  classify: '',\n  count: '',\n};\n\nexport default defineComponent({\n  props: {\n    show: Boolean,\n  },\n  setup(props, context) {\n    const addForm = reactive(clone(defaultFormData));\n\n    if (store.state.goodClassify.length) {\n      addForm.classify = store.state.goodClassify[0]._id;\n    }\n\n    const close = () => {\n      context.emit('update:show', false);\n    };\n\n    const submit = async () => {\n      const form = clone(addForm);\n      form.producedDate = addForm.producedDate.valueOf();\n      const res = await good.add(form);\n\n      result(res)\n        .success((d, { data }) => {\n          Object.assign(addForm, defaultFormData);\n          message.success(data.msg);\n\n          context.emit('getList');\n\n          close();\n        });\n    };\n\n    return {\n      addForm,\n      submit,\n      props,\n      close,\n      store: store.state,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=4a6e911e\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { defineComponent, ref, onMounted } from 'vue';\nimport { good, goodClassify } from '@/service';\nimport { useRouter } from 'vue-router';\nimport { message, Modal, Input } from 'ant-design-vue';\nimport { result, formatTimestamp } from '@/helpers/utils';\nimport { getHeaders } from '@/helpers/request';\nimport { getClassifyTitleById } from '@/helpers/good-classify';\nimport AddOne from './AddOne/index.vue';\nimport _ from '@/config/common';\nimport Update from './Update/index.vue';\n\nexport default defineComponent({\n  components: {\n    AddOne,\n    Update,\n  },\n  props: {\n    simple: Boolean,\n  },\n  setup(props) {\n    const router = useRouter();\n\n    const columns = [\n      {\n        title: `${_.KEYWORD}名`,\n        dataIndex: 'name',\n      },\n      {\n        title: '保质期',\n        dataIndex: 'expirationDate',\n      },\n      {\n        title: '价格',\n        dataIndex: 'price',\n      },\n      {\n        title: '库存',\n        slots: {\n          customRender: 'count',\n        },\n      },\n      {\n        title: '生产日期',\n        dataIndex: 'producedDate',\n        slots: {\n          customRender: 'producedDate',\n        },\n      },\n      {\n        title: '分类',\n        slots: {\n          customRender: 'classify',\n        },\n      },\n    ];\n\n    if (!props.simple) {\n      columns.push({\n        title: '操作',\n        slots: {\n          customRender: 'actions',\n        },\n      });\n    }\n\n    const show = ref(false);\n    const showUpdateModal = ref(false);\n    const list = ref([]);\n    const total = ref(0);\n    const curPage = ref(1);\n    const keyword = ref('');\n    const isSearch = ref(false);\n    const curEditGood = ref({});\n\n    // 获取商品列表\n    const getList = async () => {\n      const res = await good.list({\n        page: curPage.value,\n        size: 10,\n        keyword: keyword.value,\n      });\n\n      result(res)\n        .success(({ data }) => {\n          const { list: l, total: t } = data;\n          list.value = l;\n          total.value = t;\n        });\n    };\n\n    onMounted(async () => {\n      getList();\n    });\n\n    // 设置页码\n    // 切页\n    const setPage = (page) => {\n      curPage.value = page;\n\n      getList();\n    };\n\n    // 触发搜索\n    const onSearch = () => {\n      getList();\n\n      // 字符串非空的时候 -> true\n      // 字符串为空的时候 -> false\n      isSearch.value = Boolean(keyword.value);\n    };\n\n    // 回到全部列表\n    const backAll = () => {\n      keyword.value = '';\n      isSearch.value = false;\n\n      getList();\n    };\n\n    // 删除一本商品\n    const remove = async ({ text: record }) => {\n      const { _id } = record;\n\n      const res = await good.remove(_id);\n\n      result(res)\n        .success(({ msg }) => {\n          message.success(msg);\n\n          getList();\n        });\n    };\n\n    const updateCount = (type, record) => {\n      let word = '增加';\n\n      if (type === 'OUT_COUNT') {\n        word = '减少';\n      }\n\n      Modal.confirm({\n        title: `要${word}多少库存`,\n        content: (\n          <div>\n            <Input class=\"__good_input_count\" />\n          </div>\n        ),\n        onOk: async () => {\n          const el = document.querySelector('.__good_input_count');\n          let num = el.value;\n\n          const res = await good.updateCount({\n            id: record._id,\n            num,\n            type,\n          });\n\n          result(res)\n            .success((data) => {\n              if (type === 'IN_COUNT') {\n                // 入库操作\n                num = Math.abs(num);\n              } else {\n                // 出库操作\n                num = -Math.abs(num);\n              }\n\n              const one = list.value.find((item) => {\n                return item._id === record._id;\n              });\n\n              if (one) {\n                console.log(num);\n                one.count = one.count + num;\n\n                message.success(`成功${word} ${Math.abs(num)} 本书`);\n              }\n            });\n        },\n      });\n    };\n\n    // 显示更新弹框\n    const update = ({ record }) => {\n      showUpdateModal.value = true;\n      curEditgood.value = record;\n    };\n\n    // 更新列表的某一行数据\n    const updateCurGood = (newData) => {\n      Object.assign(curEditgood.value, newData);\n    };\n\n    // 进入商品详情页\n    const toDetail = ({ record }) => {\n      router.push(`/goods/${record._id}`);\n    };\n\n    const onUploadChange = ({ file }) => {\n      if (file.response) {\n        result(file.response)\n          .success(async (key) => {\n            const res = await good.addMany(key);\n\n            result(res)\n              .success(({ data: { addCount } }) => {\n                message.success(`成功添加 ${addCount} 本书`);\n\n                getList();\n              });\n          });\n      }\n    };\n\n    return {\n      columns,\n      show,\n      list,\n      formatTimestamp,\n      curPage,\n      total,\n      setPage,\n      keyword,\n      onSearch,\n      backAll,\n      isSearch,\n      remove,\n      updateCount,\n      showUpdateModal,\n      update,\n      curEditGood,\n      updateCurGood,\n      toDetail,\n      getList,\n      getClassifyTitleById,\n      simple: props.simple,\n      onUploadChange,\n      headers: getHeaders(),\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=464bc92e&scoped=true\"\nimport script from \"./index.jsx?vue&type=script&lang=js\"\nexport * from \"./index.jsx?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=464bc92e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-464bc92e\"\n\nexport default script","<template>\n  <div>\n    <a-modal\n      :title=\"`修改${$$.KEYWORD}`\"\n      :visible=\"props.show\"\n      @ok=\"submit\"\n      @cancel=\"close\"\n    >\n      <a-form :label-col=\"{ span: 6 }\">\n        <a-form-item :label=\"`${$$.KEYWORD}名`\">\n          <a-input v-model:value=\"editForm.name\" />\n        </a-form-item>\n        <a-form-item label=\"价格\">\n          <a-input-number v-model:value=\"editForm.price\" :min=\"0\" :max=\"99999999999\" />\n        </a-form-item>\n        <a-form-item label=\"保质期\">\n          <a-input v-model:value=\"editForm.expirationDate\" />\n        </a-form-item>\n        <a-form-item label=\"生产日期\">\n          <a-date-picker v-model:value=\"editForm.producedDate\" />\n        </a-form-item>\n        <a-form-item label=\"分类\">\n          <a-select\n            v-model:value=\"editForm.classify\"\n            style=\"width: 120px\"\n          >\n            <a-select-option\n              v-for=\"item in store.goodClassify\"\n              :key=\"item._id\"\n              :value=\"item._id\"\n            >\n              {{ item.title }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n      </a-form>\n    </a-modal>\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>\n","import { defineComponent, reactive, watch } from 'vue';\nimport { good } from '@/service';\nimport { message } from 'ant-design-vue';\nimport { result, clone } from '@/helpers/utils';\nimport moment from 'moment';\nimport store from '@/store';\n\nexport default defineComponent({\n  props: {\n    show: Boolean,\n    good: Object,\n  },\n  setup(props, context) {\n    const editForm = reactive({\n      name: '',\n      price: 0,\n      producedDate: '',\n      expirationDate: 0,\n      classify: '',\n    });\n\n    const close = () => {\n      context.emit('update:show', false);\n    };\n\n    watch(() => props.good, (current) => {\n      Object.assign(editForm, current);\n      editForm.producedDate = moment(Number(editForm.producedDate));\n    });\n\n    const submit = async () => {\n      const res = await good.update({\n        id: props.good._id,\n        name: editForm.name,\n        price: editForm.price,\n        expirationDate: editForm.expirationDate,\n        producedDate: editForm.producedDate.valueOf(),\n        classify: editForm.classify,\n      });\n\n      result(res)\n        .success(({ data, msg }) => {\n          context.emit('update', data);\n          message.success(msg);\n          close();\n        });\n    };\n\n    return {\n      editForm,\n      submit,\n      props,\n      close,\n      store: store.state,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=24c09d16\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}