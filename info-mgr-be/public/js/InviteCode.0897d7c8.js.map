{"version":3,"sources":["webpack:///./src/views/InviteCode/index.vue","webpack:///./src/views/InviteCode/index.js","webpack:///./src/views/InviteCode/index.vue?8621"],"names":["title","value","count","min","max","type","add","pagination","bordered","columns","data-source","list","status","record","user","actions","remove","size","style","current","curPage","pageSize","total","setPage","dataIndex","slots","customRender","defineComponent","setup","ref","getList","inviteCode","res","result","success","data","l","t","onMounted","page","message","_id","msg","render"],"mappings":"oJAIsE,O,iBAExB,M,iBAoBjC,Q,uQAzBX,eAyCM,YAxCJ,eAuCS,GAvCDA,MAAM,SAAO,C,wBACnB,iBAIM,CAJN,eAIM,YAHJ,eAA8D,GAAtCC,MAAO,EAAAC,M,gDAAA,EAAAA,MAAK,IAAGC,IAAK,EAAIC,IAAK,K,oBAErD,eAAmD,GAAzCC,KAAK,UAAW,QAAO,EAAAC,K,yBAAK,iBAAE,C,4BAG1C,eAAa,GAEb,eAoBM,YAnBJ,eAkBU,GAjBPC,YAAY,EACbC,SAAA,GACCC,QAAS,EAAAA,QACTC,cAAa,EAAAC,M,CAEHC,OAAM,gBACf,gBADmBC,EACnB,EADmBA,OACnB,MADyB,C,8BACtBA,EAAOC,KAAI,oBAELC,QAAO,gBAChB,gBADoBF,EACpB,EADoBA,OACpB,MAD0B,CAC1B,eAMW,GALR,QAAK,mBAAE,EAAAG,OAAOH,IACfI,KAAK,QACLZ,KAAK,U,yBACN,iBAED,C,qEAKN,eAOW,GAPDa,MAAA,uBAAwB,C,wBAChC,iBAKgB,CALhB,eAKgB,GAJNC,QAAS,EAAAC,Q,kDAAA,EAAAA,QAAO,IACvBC,SAAU,GACVC,MAAO,EAAAA,MACP,SAAQ,EAAAC,S,6HCjCbd,EAAU,CACd,CACET,MAAO,MACPwB,UAAW,QAEb,CACExB,MAAO,OACPyB,MAAO,CACLC,aAAc,WAGlB,CACE1B,MAAO,KACPyB,MAAO,CACLC,aAAc,aAKLC,iBAAgB,CAC7BC,MAD6B,WAE3B,IAAM1B,EAAQ2B,eAAI,GACZT,EAAUS,eAAI,GACdlB,EAAOkB,eAAI,IACXP,EAAQO,eAAI,GAEZC,EAAO,yDAAG,oHACIC,OAAWpB,KAAKS,EAAQnB,MAAO,IADnC,OACR+B,EADQ,OAGdC,eAAOD,GACJE,SAAQ,YAAqC,QAAlCC,KAAcC,EAAoB,EAA1BzB,KAAgB0B,EAAU,EAAjBf,MAC3BX,EAAKV,MAAQmC,EACbd,EAAMrB,MAAQoC,KANJ,2CAAH,qDAUbC,gBAAU,WACRR,OAGF,IAAMP,EAAU,SAACgB,GACfnB,EAAQnB,MAAQsC,EAChBT,KAGIxB,EAAG,yDAAG,oHACQyB,OAAWzB,IAAIJ,EAAMD,OAD7B,OACJ+B,EADI,OAGVC,eAAOD,GACJE,SAAQ,WACPM,OAAQN,QAAR,eAAwBhC,EAAMD,MAA9B,UACA6B,OANM,2CAAH,qDAUHd,EAAM,yDAAG,8GAASyB,EAAT,EAASA,IAAT,SACKV,OAAWf,OAAOyB,GADvB,OACPT,EADO,OAGbC,eAAOD,GACJE,SAAQ,YAAa,IAAVQ,EAAU,EAAVA,IACVF,OAAQN,QAAQQ,GAEhBZ,OAPS,2CAAH,sDAWZ,MAAO,CACL5B,QAEAS,OACAW,QACAb,UACAW,UACAG,UACAjB,MACAU,aC7EN,EAAO2B,OAASA,EAED","file":"js/InviteCode.0897d7c8.js","sourcesContent":["<template>\n  <div>\n    <a-card title=\"邀请码管理\">\n      <div>\n        <a-input-number v-model:value=\"count\" :min=\"1\" :max=\"10000\" />\n        &nbsp;\n        <a-button type=\"primary\" @click=\"add\">添加</a-button>\n      </div>\n\n      <a-divider />\n\n      <div>\n        <a-table\n          :pagination=\"false\"\n          bordered\n          :columns=\"columns\"\n          :data-source=\"list\"\n        >\n          <template #status=\"{ record }\">\n            {{ record.user ? '已使用' : '未使用' }}\n          </template>\n          <template #actions=\"{ record }\">\n            <a-button\n              @click=\"remove(record)\"\n              size=\"small\"\n              type=\"danger\"\n            >\n              删除\n            </a-button>\n          </template>\n        </a-table>\n      </div>\n\n      <flex-end style=\"margin-top: 24px\">\n        <a-pagination\n          v-model:current=\"curPage\"\n          :pageSize=\"20\"\n          :total=\"total\"\n          @change=\"setPage\"\n        ></a-pagination>\n      </flex-end>\n    </a-card>\n  </div>\n</template>\n\n<script src=\"./index.js\"></script>","import { defineComponent, ref, onMounted } from 'vue';\nimport { inviteCode } from '@/service';\nimport { result } from '@/helpers/utils';\nimport { message } from 'ant-design-vue';\n\nconst columns = [\n  {\n    title: '邀请码',\n    dataIndex: 'code',\n  },\n  {\n    title: '使用状态',\n    slots: {\n      customRender: 'status',\n    },\n  },\n  {\n    title: '操作',\n    slots: {\n      customRender: 'actions',\n    },\n  },\n];\n\nexport default defineComponent({\n  setup() {\n    const count = ref(1);\n    const curPage = ref(1);\n    const list = ref([]);\n    const total = ref(0);\n\n    const getList = async () => {\n      const res = await inviteCode.list(curPage.value, 20);\n\n      result(res)\n        .success(({ data: { list: l, total: t } }) => {\n          list.value = l;\n          total.value = t;\n        });\n    };\n\n    onMounted(() => {\n      getList();\n    });\n\n    const setPage = (page) => {\n      curPage.value = page;\n      getList();\n    };\n\n    const add = async () => {\n      const res = await inviteCode.add(count.value);\n\n      result(res)\n        .success(() => {\n          message.success(`成功添加 ${count.value} 条邀请码`);\n          getList();\n        });\n    };\n\n    const remove = async ({ _id }) => {\n      const res = await inviteCode.remove(_id);\n\n      result(res)\n        .success(({ msg }) => {\n          message.success(msg);\n\n          getList();\n        });\n    };\n\n    return {\n      count,\n\n      list,\n      total,\n      columns,\n      curPage,\n      setPage,\n      add,\n      remove,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=fa864c5e\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}